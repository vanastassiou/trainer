{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Exercise Database",
  "description": "A comprehensive database of exercises for fitness training",
  "type": "object",
  "required": ["exercises"],
  "properties": {
    "version": {
      "type": "integer",
      "description": "Schema version number"
    },
    "lastUpdated": {
      "type": "string",
      "description": "Date of last update (YYYY-MM-DD)",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "general_advice": {
      "type": "object",
      "description": "Universal best practices that apply to all exercises",
      "properties": {
        "tempo": { "type": "string" },
        "range_of_motion": { "type": "string" },
        "breathing": { "type": "string" },
        "progression": { "type": "string" },
        "warmup": { "type": "string" }
      }
    },
    "exercises": {
      "type": "object",
      "description": "Map of exercise ID to exercise definition",
      "additionalProperties": {
        "type": "object",
        "required": ["name", "muscles", "movement", "equipment", "difficulty"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Display name of the exercise"
          },
          "muscles": {
            "type": "object",
            "description": "Muscle involvement classification",
            "required": ["target", "primary", "synergists", "stabilizers"],
            "properties": {
              "target": {
                "type": "string",
                "description": "Primary muscle group for UI filtering (colloquial name)",
                "enum": [
                  "chest",
                  "back",
                  "shoulders",
                  "biceps",
                  "triceps",
                  "quadriceps",
                  "hamstrings",
                  "glutes",
                  "calves",
                  "core"
                ]
              },
              "primary": {
                "type": "array",
                "description": "Prime movers (agonists) using anatomical terminology",
                "items": {
                  "type": "string",
                  "enum": [
                    "pectoralis major",
                    "latissimus dorsi",
                    "trapezius",
                    "rhomboideus",
                    "erector spinae",
                    "deltoideus",
                    "deltoideus anterior",
                    "deltoideus lateralis",
                    "deltoideus posterior",
                    "biceps brachii",
                    "brachialis",
                    "triceps brachii",
                    "quadriceps femoris",
                    "biceps femoris",
                    "semitendinosus",
                    "semimembranosus",
                    "gluteus maximus",
                    "gluteus medius",
                    "gastrocnemius",
                    "soleus",
                    "rectus abdominis",
                    "obliquus externus abdominis",
                    "transversus abdominis"
                  ]
                }
              },
              "synergists": {
                "type": "array",
                "description": "Assisting muscles that help the prime movers",
                "items": {
                  "type": "string",
                  "enum": [
                    "pectoralis major",
                    "pectoralis minor",
                    "latissimus dorsi",
                    "trapezius",
                    "rhomboideus",
                    "erector spinae",
                    "deltoideus",
                    "deltoideus anterior",
                    "deltoideus lateralis",
                    "deltoideus posterior",
                    "biceps brachii",
                    "brachialis",
                    "brachioradialis",
                    "triceps brachii",
                    "quadriceps femoris",
                    "biceps femoris",
                    "semitendinosus",
                    "semimembranosus",
                    "gluteus maximus",
                    "gluteus medius",
                    "tensor fasciae latae",
                    "gastrocnemius",
                    "soleus",
                    "rectus abdominis",
                    "obliquus externus abdominis",
                    "transversus abdominis",
                    "iliopsoas",
                    "adductor magnus",
                    "serratus anterior",
                    "teres major",
                    "teres minor",
                    "infraspinatus",
                    "supraspinatus",
                    "subscapularis"
                  ]
                }
              },
              "stabilizers": {
                "type": "array",
                "description": "Muscles contracting isometrically to stabilize joints",
                "items": {
                  "type": "string",
                  "enum": [
                    "core",
                    "rotator cuff",
                    "scapular stabilizers",
                    "erector spinae",
                    "rectus abdominis",
                    "obliquus externus abdominis",
                    "transversus abdominis",
                    "gluteus medius",
                    "hip stabilizers",
                    "quadriceps femoris",
                    "hamstrings",
                    "deltoideus",
                    "trapezius",
                    "rhomboideus",
                    "serratus anterior",
                    "forearm flexors",
                    "forearm extensors",
                    "gastrocnemius",
                    "soleus",
                    "tibialis anterior"
                  ]
                }
              }
            },
            "additionalProperties": false
          },
          "movement": {
            "type": "object",
            "description": "Movement classification for programming",
            "required": ["pattern", "joint_type", "kinetic_chain", "laterality", "contraction", "arm_position"],
            "properties": {
              "pattern": {
                "type": "string",
                "description": "Fundamental movement pattern with direction",
                "enum": [
                  "horizontal_push",
                  "vertical_push",
                  "horizontal_pull",
                  "vertical_pull",
                  "hinge",
                  "squat",
                  "lunge",
                  "carry",
                  "rotation",
                  "isolation"
                ]
              },
              "joint_type": {
                "type": "string",
                "description": "Joint involvement: compound (multi-joint) or isolation (single-joint)",
                "enum": ["compound", "isolation"]
              },
              "kinetic_chain": {
                "type": "string",
                "description": "Kinetic chain type: closed (distal segment fixed) or open (distal segment free)",
                "enum": ["closed", "open"]
              },
              "laterality": {
                "type": "string",
                "description": "Limb involvement: bilateral (both limbs) or unilateral (single limb)",
                "enum": ["bilateral", "unilateral"]
              },
              "contraction": {
                "type": "string",
                "description": "Primary contraction type: dynamic (concentric/eccentric) or isometric (static hold)",
                "enum": ["dynamic", "isometric"]
              },
              "arm_position": {
                "type": "string",
                "description": "Arm position for calisthenics: straight-arm vs bent-arm strength, n/a for lower body",
                "enum": ["bent", "straight", "n/a"]
              }
            },
            "additionalProperties": false
          },
          "equipment": {
            "type": "string",
            "description": "Equipment required for the exercise",
            "enum": [
              "bodyweight",
              "resistance_band",
              "dumbbell",
              "barbell",
              "machine"
            ]
          },
          "difficulty": {
            "type": "string",
            "description": "Skill level required",
            "enum": ["beginner", "intermediate", "advanced"]
          },
          "description": {
            "type": "string",
            "description": "Brief overview of the exercise"
          },
          "instructions": {
            "type": "object",
            "description": "Three-part instructions for exercise execution",
            "required": ["starting_position", "movement", "return"],
            "properties": {
              "starting_position": {
                "type": "string",
                "description": "Setup and body positioning before the movement"
              },
              "movement": {
                "type": "string",
                "description": "Execution of the exercise with proper form cues"
              },
              "return": {
                "type": "string",
                "description": "Controlled return to starting position"
              }
            },
            "additionalProperties": false
          },
          "tips": {
            "type": "array",
            "description": "Form and technique tips",
            "items": {
              "type": "string"
            }
          },
          "avoid": {
            "type": "array",
            "description": "Common mistakes and form errors to avoid",
            "items": {
              "type": "string"
            }
          },
          "prerequisites": {
            "type": "array",
            "description": "Exercise IDs to master before attempting this exercise",
            "items": {
              "type": "string",
              "pattern": "^[a-z0-9-]+$"
            }
          },
          "image_url": {
            "type": "string",
            "description": "URL to exercise demonstration image",
            "format": "uri"
          },
          "video_url": {
            "type": "string",
            "description": "URL to exercise demonstration video",
            "format": "uri"
          },
          "references": {
            "type": "array",
            "description": "Source references for exercise information",
            "items": {
              "type": "object",
              "required": ["source", "url"],
              "properties": {
                "source": {
                  "type": "string",
                  "description": "Source identifier (e.g., exrx, pubmed)"
                },
                "url": {
                  "type": "string",
                  "description": "URL to source",
                  "format": "uri"
                }
              }
            }
          }
        }
      },
      "propertyNames": {
        "pattern": "^[a-z0-9-]+$"
      }
    }
  }
}
